<!--
  Generated template for the RegistrarPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Registrar</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <form [formGroup]="registrarForm">
    <ion-item>
      <ion-label floating>Email:</ion-label>
      <ion-input formControlName="email" type="email" required 
      [(ngModel)]="usuario.email"></ion-input>
    </ion-item>
    <ion-list *ngIf="registrarForm.controls.email.invalid && (registrarForm.controls.email.dirty || registrarForm.controls.email.touched)">
      <ion-item *ngIf="registrarForm.controls.email.errors.required">
        <span>Email é obrigatório</span>
      </ion-item>
      <ion-item *ngIf="registrarForm.controls.email.errors.pattern">
        <span>Email em formato inválido</span>
      </ion-item>
    </ion-list> 

    <ion-item>
      <ion-label floating>Nome:</ion-label>
      <ion-input formControlName="nome" type="text" mascara="AAA-9999" required [(ngModel)]="condutor.nome"></ion-input>
    </ion-item>

    <ion-item>
      <ion-label floating>Telefone:</ion-label>
       <ion-input formControlName="telefone" type="tel" required [(ngModel)]="condutor.telefone" 
      mascara="(99)9999-9999" 
      textMask="{mask: mascaras.telefone}"></ion-input> 
    </ion-item>
     <ion-list *ngIf="registrarForm.controls.telefone.invalid && (registrarForm.controls.telefone.dirty || registrarForm.controls.telefone.touched)">
      <ion-item *ngIf="registrarForm.controls.telefone.errors.required">
        <span>Telefone é obrigatório</span>
      </ion-item>
      <ion-item *ngIf="registrarForm.controls.telefone.errors.pattern">
        <span>Telefone em formato inválido</span>
      </ion-item>
    </ion-list>  

    <ion-item>
      <ion-label floating>Senha:</ion-label>
      <ion-input formControlName="senha" type="password" required minlength="6" [(ngModel)]="usuario.senha"></ion-input>
    </ion-item>
    <ion-list *ngIf="registrarForm.controls.senha.invalid && (registrarForm.controls.senha.dirty || registrarForm.controls.senha.touched)">
      <ion-item *ngIf="registrarForm.controls.senha.errors.required">
        <span>Senha é obrigatória</span>
      </ion-item>
      <ion-item *ngIf="registrarForm.controls.senha.errors.minlength">
        <span>A senha deve possuir ao menos 6 caracteres</span>
      </ion-item>
    </ion-list> 

        
    <detalhe-veiculo [veiculo]="condutor.veiculo"></detalhe-veiculo>
  </form>     

<ion-footer>
  <ion-toolbar>
    <ion-buttons end>
      <button ion-button [disabled]="registrarForm.invalid" icon-right (click)="registrar()">Salvar<ion-icon name="arrow-dropup"></ion-icon></button>
    </ion-buttons>
  </ion-toolbar>  
</ion-footer>
